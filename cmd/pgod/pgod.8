.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "PGOD" 8 "May 2023" "System Administration" "Podman Compose"

.SH "PGOD"
.SH "NAME"
.PP
pgod - watch a git repository, pull changes and restart the podman compose service

.SH "SYNOPSIS"
.PP
\fB\fCpgod [OPTION]...\fR \fB\fC-c\fR \fBCONFIG\fP

.SH "DESCRIPTION"
.PP
\fB\fCpgod\fR clones and pulls all repositories that are defined in the config file. It then exposes a SSH
interface which you can interact with using \fB\fCpgoctl\fR or plain \fB\fCssh\fR.

.PP
The options are:

.TP
\fB-c, --config string\fP
config file to read
.TP
\fB-s, --ssh string\fP
ssh address to listen on (default ":2222")
.TP
\fB-d, --debug\fP
enable debug logging
.TP
\fB-r, --restart\fP
send SIGHUP to ourselves when config changes
.TP
\fB-o, --root\fP
require root permission, setting to false can aid in debugging (default true)
.TP
\fB-t, --duration duration\fP
default duration between pulls (default 5m0s)


.SH "CONFIG FILE"
.PP
\fB\fCpgod\fR requires a TOML config file where the services are defined, an example config file looks like
this:

.PP
.RS

.nf
[[services]]
name = "pgo"
user = "miek"  # under which user to run the podman
group = "miek" # which group to run the podman // not used atm
repository = "https://github.com/miekg/pgo"
branch = "main"
urls = { "slashdot.org" = ":303" }
ports = [ "5005/5", "1025/5" ]

.fi
.RE

.SH "INTERFACE"
.PP
(ssh stuff)

.SH "METRICS"
.PP
There are no metrics yet.

.SH "EXIT CODE"
.SH "SEE ALSO"
.PP
See this design doc
\[la]https://miek.nl/2022/november/15/provisioning-services/\[ra], and
gitopper
\[la]https://github.com/miekg/gitopper\[ra].

